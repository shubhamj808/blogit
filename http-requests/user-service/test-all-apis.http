### Variables
@baseUrl = http://localhost:8081/api/v1
@email = test@example.com
@password = Test123!
@authToken = {{login.response.body.data.token}}
@userId = {{register.response.body.data.id}}

###############################################
# AUTHENTICATION
###############################################

### Register a new user
# @name register
POST {{baseUrl}}/users/register
Content-Type: application/json

{
    "username": "testuser",
    "email": "{{email}}",
    "password": "{{password}}",
    "fullName": "Test User",
    "firstName": "Test",
    "lastName": "User",
    "dateOfBirth": "1990-01-01",
    "acceptTerms": true
}

### Login
# @name login
POST {{baseUrl}}/users/login
Content-Type: application/json

{
    "email": "{{email}}",
    "password": "{{password}}"
}

### Logout
POST {{baseUrl}}/users/logout
Authorization: Bearer {{authToken}}

###############################################
# USER PROFILE
###############################################

### Get current user profile
GET {{baseUrl}}/users/me
Authorization: Bearer {{authToken}}

### Update user profile
PATCH {{baseUrl}}/users/me
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "fullName": "Updated Test User",
    "bio": "Updated bio",
    "location": "Updated location",
    "website": "https://updated-test.com",
    "avatarUrl": "https://example.com/avatar.jpg"
}

### Get user by ID
GET {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{authToken}}

### Search users
GET {{baseUrl}}/users/search?query=test&page=0&size=10
Authorization: Bearer {{authToken}}

###############################################
# FOLLOWING
###############################################

### Follow a user
POST {{baseUrl}}/users/{{userId}}/follow
Authorization: Bearer {{authToken}}

### Unfollow a user
DELETE {{baseUrl}}/users/{{userId}}/follow
Authorization: Bearer {{authToken}}

### Get user followers
GET {{baseUrl}}/users/{{userId}}/followers?page=0&size=10
Authorization: Bearer {{authToken}}

### Get user following
GET {{baseUrl}}/users/{{userId}}/following?page=0&size=10
Authorization: Bearer {{authToken}}

###############################################
# PASSWORD MANAGEMENT
###############################################

### Request password reset
POST {{baseUrl}}/users/password/reset-request
Content-Type: application/json

{
    "email": "{{email}}"
}

### Reset password
POST {{baseUrl}}/users/password/reset
Content-Type: application/json

{
    "token": "reset-token-from-email",
    "newPassword": "NewTest123!"
}

### Change password
POST {{baseUrl}}/users/password/change
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "currentPassword": "{{password}}",
    "newPassword": "NewTest123!"
}

###############################################
# EMAIL VERIFICATION
###############################################

### Verify email
GET {{baseUrl}}/users/verify-email?token=verification-token-from-email

### Resend verification email
POST {{baseUrl}}/users/verify-email/resend
Authorization: Bearer {{authToken}}

###############################################
# USER STATISTICS
###############################################

### Get user stats
GET {{baseUrl}}/users/{{userId}}/stats
Authorization: Bearer {{authToken}}

###############################################
# MONITORING
###############################################

### Health Check
GET {{baseUrl}}/actuator/health

### Metrics
GET {{baseUrl}}/actuator/metrics

### OpenAPI Documentation
GET {{baseUrl}}/v3/api-docs 